<!DOCTYPE html>
<!--   -->
<html>
  <head>
    <title>Ajax</title>
    <meta charset="utf-8"/>
    <style type="text/css">

    </style>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
  </head>

  <body>
    <div id="requestNHLD">
      <input id="requestNHL" type="button" value="NHL Team Rankings:" />
        Team Name:<input id="requestNHlPlayersTeam" type="text"></input>
      <input id="requestNHLPlayersByTeam" type="button" value="NHL Players By Team:" />
    </div>

   <div id="requestNBAD">
      <input id="requestNBA" type="button" value="NBA Team Rankings" />
      Team Name:<input id="requestNBAPlayersTeam" type="text"></input>
      <input id="requestNBAPlayersByTeam" type="button" value="NBA Players By Team:" />
    </div>


    <div id="requestNHLPlayerD">
     First Name:<input id="requestNHLPlayerFirst" type="text"></input>
     Last Name:<input id="requestNHLPlayerLast" type="text"></input>
     <input id="requestNHLPlayer" type="button" value="RequestNHLPlayer" />
     <input id="requestNHLPlayerStats" type="button" value="RequestNHLPlayerStats" />
   </div>
   <div id="requestNBAPlayerD">
    First Name:<input id="requestNBAPlayerFirst" type="text"></input>
    Last Name:<input id="requestNBAPlayerLast" type="text"></input>
    <input id="requestNBAPlayer" type="button" value="RequestNBAPlayer" />
      <input id="requestNBAPlayerStats" type="button" value="RequestNBAPlayerStats" />
  </div>

  <table id='sports' style='border:2px solid black'>
  </table>
  <table id='playerStats' style='border:2px solid black'>
  </table>



    <script>
      function success(data) {
        $("#sports").empty();
        $("#playerStats").empty();

        console.log(data.info);
        for (let i=0;i<data.info.length;i++) {


           $("#sports").append("<tr><td>"  + data.info[i].team.Name + "</td>"  +
                               //"<td>" + data.info[i].player.LastName + "</td>" +
                               "<td>" + data.info[i].rank + "</td></tr>");

        }

      }
      function requestPlayerSuccess(data) {
        if(!data.info)
          alert("PLAYER DOES NOT EXIST");
          else{

          $("#sports").empty();
          $("#playerStats").empty();

          console.log(data.info);

          $("#playerStats").append("<tr><td>Firstname</td>"  +
                              "<td>Lastname</td>" +
                              "<td>Height</td>"+
                              "<td>Age</td>"+
                              "<td>Team</td>"+
                              "<td>Position</td></tr>");
           $("#playerStats").append("<tr><td>" + data.info.player.FirstName + "</td>"  +
                               "<td>" + data.info.player.LastName + "</td>" +
                               "<td>" + data.info.player.Height + "</td>"+
                               "<td>" + data.info.player.Age + "</td>"+
                               "<td>" + data.info.team.Name + "</td>" +
                               "<td>" + data.info.player.Position + "</td></tr>");
           }
      }
      function requestPlayerStatsSuccess(data) {
        if(!data.info)
          alert("PLAYER DOES NOT EXIST");
          else{

          $("#sports").empty();
          $("#playerStats").empty();

          console.log(data.info);
          console.log(data.info.stats.Pts);

          $("#playerStats").append("<tr><td>Firstname</td>"  +
                              "<td>Team</td>"+
                              "<td>Points</td></tr>");
           $("#playerStats").append("<tr><td>" + data.info.player.FirstName + "</td>"  +
                               "<td>" + data.info.team.Name + "</td>" +
                               "<td>" + data.info.stats.Pts['#text'] + "</td></tr>");
           }
      }
      function requestTeamSuccess(data) {
        if(!data.info)
          alert("TEAM DOES NOT EXIST");
          else {
            {
          }
          $("#sports").empty();
          $("#playerStats").empty();

        console.log(data.info);
        for (let i=0;i<data.info.length;i++) {


           $("#sports").append("<tr><td>"  + data.info[i].player.FirstName + "</td>"  +
                               "<td>" + data.info[i].player.LastName + "</td>" +
                               "<td>" + data.info[i].player.Height + "</td></tr>");

        }
      }

      }

      function requestClicked(){
//send an HTTP get request and get a result back.
      $.get("/requestNHL", success);
        return false;
      }

       function requestNBAClicked(){
//send an HTTP get request and get a result back.
      $.get("/requestNBA", success);
        return false;
      }

       function requestNBAPlayerClicked(){
//send an HTTP get request and get a result back.
      $.get("/requestNBA/name",
            {firstname:$("#requestNBAPlayerFirst").val(),
            lastname:$('#requestNBAPlayerLast').val()},
            requestPlayerSuccess);
        return false;
      }
      function requestNHLPlayerClicked(){
//send an HTTP get request and get a result back.
     $.get("/requestNHL/name",
           {firstname:$("#requestNHLPlayerFirst").val(),
           lastname:$('#requestNHLPlayerLast').val()},
           requestPlayerSuccess);
       return false;
     }
     function requestNBAPlayerStatsClicked(){
//send an HTTP get request and get a result back.
    $.get("/requestNBAStats/name",
          {firstname:$("#requestNBAPlayerFirst").val(),
          lastname:$('#requestNBAPlayerLast').val()},
          requestPlayerStatsSuccess);
      return false;
    }
    function requestNHLPlayerStatsClicked(){
//send an HTTP get request and get a result back.
   $.get("/requestNHLStats/name",
         {firstname:$("#requestNHLPlayerFirst").val(),
         lastname:$('#requestNHLPlayerLast').val()},
         requestPlayerStatsSuccess);
     return false;
   }

     function requestNBATeamClicked(){
//send an HTTP get request and get a result back.
    $.get("/requestNBATeam/name" ,
          {teamname:$("#requestNBAPlayersTeam").val()},
           requestTeamSuccess);
      return false;
    }
    function requestNHLTeamClicked(){
//send an HTTP get request and get a result back.
   $.get("/requestNHLTeam/name" ,
         {teamname:$("#requestNHlPlayersTeam").val()},
          requestTeamSuccess);
     return false;
   }


      $(document).ready(function(){
        $("#requestNHL").click(requestClicked);
        /////////////////////////////////////////////////////////////////////
        $("#requestNBA").click(requestNBAClicked);
        //////////////////////////////////////////////////////////////////////
        $("#requestNHLPlayersByTeam").click(requestNHLTeamClicked);
        $("#requestNHlPlayersTeam").keydown( function( event ) {
            if ( event.which === 13 ) {
              requestNHLTeamClicked();
              event.preventDefault();
              return false;
            }
        });
        //////////////////////////////////////////////////////////////////////
        $("#requestNBAPlayersByTeam").click(requestNBATeamClicked);
        $("#requestNBAPlayersTeam").keydown( function( event ) {
            if ( event.which === 13 ) {
              requestNBATeamClicked();
              event.preventDefault();
              return false;
            }
        });
        /////////////////////////////////////////////////////////////////
        $("#requestNHLPlayer").click(requestNHLPlayerClicked);
        $("#requestNHLPlayerLast").keydown( function( event ) {
            if ( event.which === 13 ) {
              requestNHLPlayerClicked();
              event.preventDefault();
              return false;
            }
        });
        ////////////////////////////////////////////////////////////
        $("#requestNBAPlayer").click(requestNBAPlayerClicked);
        $("#requestNBAPlayerLast").keydown( function( event ) {
            if ( event.which === 13 ) {
              requestNBAPlayerClicked();
              event.preventDefault();
              return false;
            }
        });
        /////////////////////////////////////////////////////////////////
        $("#requestNHLPlayerStats").click(requestNHLPlayerStatsClicked);
        ////////////////////////////////////////////////////////////
        $("#requestNBAPlayerStats").click(requestNBAPlayerStatsClicked);

      });

    </script>
  </body>
</html>
